const filterCabang = document.getElementById("filterCabang");
const filterPrincipal = document.getElementById("filterPrincipal");
const filterPIC = document.getElementById("filterPIC");
const cards = document.querySelectorAll(".analyst-card");

function applyFilter() {
  const cabangValue = filterCabang.value.toLowerCase();
  const principalValue = filterPrincipal.value.toLowerCase();
  const picValue = filterPIC.value.toLowerCase();

  cards.forEach(card => {
    const cabangData = card.dataset.cabang.toLowerCase();
    const principalData = card.dataset.principal.toLowerCase();
    const picData = card.id.toLowerCase();

    const matchCabang = cabangValue === "" || cabangData.includes(cabangValue);
    const matchPrincipal = principalValue === "" || principalData.includes(principalValue);
    const matchPIC = picValue === "" || picData === picValue;

    card.style.display =
      matchCabang && matchPrincipal && matchPIC ? "block" : "none";
  });
}

// events
filterCabang.addEventListener("change", applyFilter);
filterPrincipal.addEventListener("change", applyFilter);
filterPIC.addEventListener("change", applyFilter);

// sidebar search desktop
const sidebarSearch = document.getElementById("sidebarSearch");
const sidebarLinks = document.querySelectorAll(".sidebar .nav-link");

sidebarSearch.addEventListener("keyup", function () {
  const keyword = this.value.toLowerCase();
  sidebarLinks.forEach(link => {
    link.parentElement.style.display =
      link.textContent.toLowerCase().includes(keyword) ? "block" : "none";
  });
});
